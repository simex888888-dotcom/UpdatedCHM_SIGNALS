"""
–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã Telegram –±–æ—Ç–∞ ‚Äî –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
"""

from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
from user_manager import UserSettings


def _btn(text: str, cb: str) -> list:
    return [InlineKeyboardButton(text=text, callback_data=cb)]

def _back(cb: str = "back_main") -> list:
    return [InlineKeyboardButton(text="‚óÄÔ∏è –ù–∞–∑–∞–¥", callback_data=cb)]

def _noop(text: str) -> list:
    return [InlineKeyboardButton(text=text, callback_data="noop")]

def _check(v: bool) -> str:
    return "‚úÖ" if v else "‚ùå"

def _mark(current, val) -> str:
    return "‚óâ " if current == val else "‚óã "


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def trend_text(trend: dict) -> str:
    """–°—Ç—Ä–æ–∫–∞ —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Ç—Ä–µ–Ω–¥–æ–º –¥–ª—è —à–∞–ø–∫–∏ –º–µ–Ω—é."""
    if not trend:
        return "üåç <b>–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥:</b> –∑–∞–≥—Ä—É–∑–∫–∞...\n"
    btc = trend.get("BTC", {})
    eth = trend.get("ETH", {})
    btc_str = btc.get("emoji", "‚ùì") + " BTC: <b>" + btc.get("trend", "‚Äî") + "</b>"
    eth_str = eth.get("emoji", "‚ùì") + " ETH: <b>" + eth.get("trend", "‚Äî") + "</b>"
    return "üåç <b>–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ (1D):</b>\n" + btc_str + "  |  " + eth_str + "\n"


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_main(user: UserSettings) -> InlineKeyboardMarkup:
    """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Äî –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Å–∫–∞–Ω–µ—Ä–∞."""
    return InlineKeyboardMarkup(inline_keyboard=[
        _btn("üìà –õ–û–ù–ì ‚Äî —Ç–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª—ã –≤ –ª–æ–Ω–≥",   "mode_long"),
        _btn("üìâ –®–û–†–¢ ‚Äî —Ç–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª—ã –≤ —à–æ—Ä—Ç",   "mode_short"),
        _btn("‚ö° –û–ë–ê ‚Äî –ª–æ–Ω–≥–∏ –∏ —à–æ—Ä—Ç—ã (—Ç–µ–∫—É—â–∏–π)",   "mode_both"),
        _btn("üìä –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",                   "my_stats"),
    ])


def kb_mode_long(user: UserSettings) -> InlineKeyboardMarkup:
    """–ú–µ–Ω—é —Ä–µ–∂–∏–º–∞ –õ–û–ù–ì."""
    active = user.scan_mode == "long" and user.active
    status = "üü¢ –õ–û–ù–ì —Å–∫–∞–Ω–µ—Ä –í–ö–õ ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" if active \
        else "üî¥ –õ–û–ù–ì —Å–∫–∞–Ω–µ—Ä –í–´–ö–õ ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å"
    return InlineKeyboardMarkup(inline_keyboard=[
        _btn(status,                              "toggle_long"),
        _btn("üìä –¢–∞–π–º—Ñ—Ä–µ–π–º –õ–û–ù–ì: " + user.long_tf, "menu_long_tf"),
        _btn("üîÑ –ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ " + str(user.long_interval // 60) + " –º–∏–Ω.", "menu_long_interval"),
        _btn("‚öôÔ∏è –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–≥–Ω–∞–ª–∞ ‚Üí",     "menu_settings"),
        _btn("‚óÄÔ∏è –ù–∞–∑–∞–¥",                          "back_main"),
    ])


def kb_mode_short(user: UserSettings) -> InlineKeyboardMarkup:
    """–ú–µ–Ω—é —Ä–µ–∂–∏–º–∞ –®–û–†–¢."""
    active = user.scan_mode == "short" and user.active
    status = "üü¢ –®–û–†–¢ —Å–∫–∞–Ω–µ—Ä –í–ö–õ ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" if active \
        else "üî¥ –®–û–†–¢ —Å–∫–∞–Ω–µ—Ä –í–´–ö–õ ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å"
    return InlineKeyboardMarkup(inline_keyboard=[
        _btn(status,                               "toggle_short"),
        _btn("üìä –¢–∞–π–º—Ñ—Ä–µ–π–º –®–û–†–¢: " + user.short_tf, "menu_short_tf"),
        _btn("üîÑ –ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ " + str(user.short_interval // 60) + " –º–∏–Ω.", "menu_short_interval"),
        _btn("‚öôÔ∏è –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–≥–Ω–∞–ª–∞ ‚Üí",      "menu_settings"),
        _btn("‚óÄÔ∏è –ù–∞–∑–∞–¥",                           "back_main"),
    ])


def kb_mode_both(user: UserSettings) -> InlineKeyboardMarkup:
    """–ú–µ–Ω—é —Ä–µ–∂–∏–º–∞ –û–ë–ê (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)."""
    active = user.scan_mode == "both" and user.active
    status = "üü¢ –°–∫–∞–Ω–µ—Ä –í–ö–õ ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" if active \
        else "üî¥ –°–∫–∞–Ω–µ—Ä –í–´–ö–õ ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å"
    return InlineKeyboardMarkup(inline_keyboard=[
        _btn(status,                              "toggle_both"),
        _btn("üìä –¢–∞–π–º—Ñ—Ä–µ–π–º: " + user.timeframe,  "menu_tf"),
        _btn("üîÑ –ò–Ω—Ç–µ—Ä–≤–∞–ª: –∫–∞–∂–¥—ã–µ " + str(user.scan_interval // 60) + " –º–∏–Ω.", "menu_interval"),
        _btn("‚öôÔ∏è –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–≥–Ω–∞–ª–∞ ‚Üí",       "menu_settings"),
        _btn("‚óÄÔ∏è –ù–∞–∑–∞–¥",                          "back_main"),
    ])


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –ú–ï–ù–Æ –í–°–ï–• –ù–ê–°–¢–†–û–ï–ö
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_settings() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[
        _noop("‚îÄ‚îÄ –°–∏–≥–Ω–∞–ª—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _btn("üìê –ü–∏–≤–æ—Ç—ã –∏ —É—Ä–æ–≤–Ω–∏ S/R",        "menu_pivots"),
        _btn("üìâ EMA —Ç—Ä–µ–Ω–¥",                   "menu_ema"),
        _btn("üî¨ –§–∏–ª—å—Ç—Ä—ã (RSI / –û–±—ä—ë–º / HTF)", "menu_filters"),
        _btn("‚≠ê –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–∞",             "menu_quality"),
        _btn("üîÅ Cooldown –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏",     "menu_cooldown"),
        _noop("‚îÄ‚îÄ –†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _btn("üõ°  –°—Ç–æ–ø-–ª–æ—Å—Å (ATR)",            "menu_sl"),
        _btn("üéØ –¶–µ–ª–∏ (Take Profit R:R)",       "menu_targets"),
        _noop("‚îÄ‚îÄ –ú–æ–Ω–µ—Ç—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _btn("üí∞ –§–∏–ª—å—Ç—Ä –º–æ–Ω–µ—Ç –ø–æ –æ–±—ä—ë–º—É",       "menu_volume"),
        _noop("‚îÄ‚îÄ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _btn("üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",                  "menu_notify"),
        _back(),
    ])


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –¢–ê–ô–ú–§–†–ï–ô–ú
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_timeframes(current_tf: str, current_htf: str = "") -> InlineKeyboardMarkup:
    tfs = [
        ("1m",  "1 –º–∏–Ω  ‚Äî —Å–∫–∞–ª—å–ø–∏–Ω–≥. –û—á–µ–Ω—å –º–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤"),
        ("5m",  "5 –º–∏–Ω  ‚Äî —Å–∫–∞–ª—å–ø–∏–Ω–≥. –ë—ã—Å—Ç—Ä—ã–µ –≤—Ö–æ–¥—ã"),
        ("15m", "15 –º–∏–Ω ‚Äî –∏–Ω—Ç—Ä–∞–¥–µ–π. –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞"),
        ("30m", "30 –º–∏–Ω ‚Äî –∏–Ω—Ç—Ä–∞–¥–µ–π. –ù–∞–¥—ë–∂–Ω–µ–µ 15m"),
        ("1h",  "1 —á–∞—Å  ‚Äî —Å–≤–∏–Ω–≥. –õ—É—á—à–∏–π –±–∞–ª–∞–Ω—Å ‚≠ê"),
        ("4h",  "4 —á–∞—Å–∞ ‚Äî —Å–≤–∏–Ω–≥. –†–µ–¥–∫–∏–µ –Ω–æ —Å–∏–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã"),
        ("1d",  "1 –¥–µ–Ω—å ‚Äî –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è. –°–∏–≥–Ω–∞–ª—ã —Ä–∞–∑ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π"),
    ]
    rows = [_noop("‚îÄ‚îÄ –í—ã–±–µ—Ä–∏ —Ä–∞–±–æ—á–∏–π —Ç–∞–π–º—Ñ—Ä–µ–π–º ‚îÄ‚îÄ")]
    for tf, desc in tfs:
        rows.append(_btn(f"{_mark(current_tf, tf)}{tf} ‚Äî {desc}", f"set_tf_{tf}"))
    rows.append(_back())
    return InlineKeyboardMarkup(inline_keyboard=rows)


def kb_long_timeframes(current_tf: str) -> InlineKeyboardMarkup:
    tfs = [
        ("1m", "1 –º–∏–Ω"), ("5m", "5 –º–∏–Ω"), ("15m", "15 –º–∏–Ω"), ("30m", "30 –º–∏–Ω"),
        ("1h", "1 —á–∞—Å ‚≠ê"), ("4h", "4 —á–∞—Å–∞"), ("1d", "1 –¥–µ–Ω—å"),
    ]
    rows = [_noop("‚îÄ‚îÄ –¢–∞–π–º—Ñ—Ä–µ–π–º –¥–ª—è –õ–û–ù–ì —Å–∏–≥–Ω–∞–ª–æ–≤ ‚îÄ‚îÄ")]
    for tf, desc in tfs:
        rows.append(_btn(f"{_mark(current_tf, tf)}{tf} ‚Äî {desc}", f"set_long_tf_{tf}"))
    rows.append(_back("mode_long"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


def kb_short_timeframes(current_tf: str) -> InlineKeyboardMarkup:
    tfs = [
        ("1m", "1 –º–∏–Ω"), ("5m", "5 –º–∏–Ω"), ("15m", "15 –º–∏–Ω"), ("30m", "30 –º–∏–Ω"),
        ("1h", "1 —á–∞—Å ‚≠ê"), ("4h", "4 —á–∞—Å–∞"), ("1d", "1 –¥–µ–Ω—å"),
    ]
    rows = [_noop("‚îÄ‚îÄ –¢–∞–π–º—Ñ—Ä–µ–π–º –¥–ª—è –®–û–†–¢ —Å–∏–≥–Ω–∞–ª–æ–≤ ‚îÄ‚îÄ")]
    for tf, desc in tfs:
        rows.append(_btn(f"{_mark(current_tf, tf)}{tf} ‚Äî {desc}", f"set_short_tf_{tf}"))
    rows.append(_back("mode_short"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –ò–ù–¢–ï–†–í–ê–õ –°–ö–ê–ù–ò–†–û–í–ê–ù–ò–Ø
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_intervals(current: int) -> InlineKeyboardMarkup:
    options = [
        (300,   "5 –º–∏–Ω   ‚Äî –¥–ª—è –¢–§ 1m-5m"),
        (900,   "15 –º–∏–Ω  ‚Äî –¥–ª—è –¢–§ 15m"),
        (1800,  "30 –º–∏–Ω  ‚Äî –¥–ª—è –¢–§ 30m"),
        (3600,  "1 —á–∞—Å   ‚Äî –¥–ª—è –¢–§ 1h ‚≠ê"),
        (7200,  "2 —á–∞—Å–∞"),
        (14400, "4 —á–∞—Å–∞  ‚Äî –¥–ª—è –¢–§ 4h"),
        (86400, "1 –¥–µ–Ω—å  ‚Äî –¥–ª—è –¢–§ 1d"),
    ]
    rows = [_noop("‚îÄ‚îÄ –ö–∞–∫ —á–∞—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Å–µ –º–æ–Ω–µ—Ç—ã ‚îÄ‚îÄ")]
    for sec, desc in options:
        rows.append(_btn(f"{_mark(current, sec)}{desc}", f"set_interval_{sec}"))
    rows.append(_back())
    return InlineKeyboardMarkup(inline_keyboard=rows)


def kb_long_intervals(current: int) -> InlineKeyboardMarkup:
    options = [
        (300, "5 –º–∏–Ω"), (900, "15 –º–∏–Ω"), (1800, "30 –º–∏–Ω"),
        (3600, "1 —á–∞—Å ‚≠ê"), (7200, "2 —á–∞—Å–∞"), (14400, "4 —á–∞—Å–∞"), (86400, "1 –¥–µ–Ω—å"),
    ]
    rows = [_noop("‚îÄ‚îÄ –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –õ–û–ù–ì —Å–∫–∞–Ω–µ—Ä–∞ ‚îÄ‚îÄ")]
    for sec, desc in options:
        rows.append(_btn(f"{_mark(current, sec)}{desc}", f"set_long_interval_{sec}"))
    rows.append(_back("mode_long"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


def kb_short_intervals(current: int) -> InlineKeyboardMarkup:
    options = [
        (300, "5 –º–∏–Ω"), (900, "15 –º–∏–Ω"), (1800, "30 –º–∏–Ω"),
        (3600, "1 —á–∞—Å ‚≠ê"), (7200, "2 —á–∞—Å–∞"), (14400, "4 —á–∞—Å–∞"), (86400, "1 –¥–µ–Ω—å"),
    ]
    rows = [_noop("‚îÄ‚îÄ –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –®–û–†–¢ —Å–∫–∞–Ω–µ—Ä–∞ ‚îÄ‚îÄ")]
    for sec, desc in options:
        rows.append(_btn(f"{_mark(current, sec)}{desc}", f"set_short_interval_{sec}"))
    rows.append(_back("mode_short"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –ü–ò–í–û–¢–´ –ò –£–†–û–í–ù–ò S/R
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_pivots(user: UserSettings) -> InlineKeyboardMarkup:
    strengths = [
        (3,  "3  ‚Äî –º–Ω–æ–≥–æ —É—Ä–æ–≤–Ω–µ–π, —à—É–º–Ω–æ. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞"),
        (5,  "5  ‚Äî —É–º–µ—Ä–µ–Ω–Ω–æ"),
        (7,  "7  ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç. –ë–∞–ª–∞–Ω—Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ ‚≠ê"),
        (10, "10 ‚Äî –º–∞–ª–æ, —Ç–æ–ª—å–∫–æ —Å–∏–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏"),
        (15, "15 ‚Äî —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —É—Ä–æ–≤–Ω–∏. –†–µ–¥–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã"),
    ]
    ages = [
        (50,  "50 —Å–≤–µ—á–µ–π  ‚Äî —Ç–æ–ª—å–∫–æ —Å–≤–µ–∂–∏–µ —É—Ä–æ–≤–Ω–∏"),
        (100, "100 —Å–≤–µ—á–µ–π ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (150, "150 —Å–≤–µ—á–µ–π ‚Äî –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã–µ —É—Ä–æ–≤–Ω–∏"),
        (200, "200 —Å–≤–µ—á–µ–π ‚Äî –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–≤–Ω–∏"),
    ]
    retests = [
        (10, "10 —Å–≤–µ—á–µ–π ‚Äî –∂–¥–∞—Ç—å —Ä–µ—Ç–µ—Å—Ç —Å–æ–≤—Å–µ–º –Ω–µ–¥–æ–ª–≥–æ. –ë–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤"),
        (20, "20 —Å–≤–µ—á–µ–π ‚Äî —É–º–µ—Ä–µ–Ω–Ω–æ"),
        (30, "30 —Å–≤–µ—á–µ–π ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (50, "50 —Å–≤–µ—á–µ–π ‚Äî –¥–æ–ª–≥–æ –∂–¥–∞—Ç—å —Ä–µ—Ç–µ—Å—Ç. –ú–µ–Ω—å—à–µ –Ω–æ –Ω–∞–¥—ë–∂–Ω–µ–µ"),
    ]
    buffers = [
        (0.1, "x0.1 ATR ‚Äî —É–∑–∫–∞—è –∑–æ–Ω–∞. –°—Ç—Ä–æ–≥–æ —É —É—Ä–æ–≤–Ω—è"),
        (0.2, "x0.2 ATR ‚Äî —É–º–µ—Ä–µ–Ω–Ω–æ"),
        (0.3, "x0.3 ATR ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (0.5, "x0.5 ATR ‚Äî —à–∏—Ä–æ–∫–∞—è –∑–æ–Ω–∞. –ë–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤"),
    ]
    rows = [
        _noop("‚îÄ‚îÄ –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∏–≤–æ—Ç–æ–≤ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _noop("–ú–µ–Ω—å—à–µ = –±–æ–ª—å—à–µ —É—Ä–æ–≤–Ω–µ–π. –ë–æ–ª—å—à–µ = —Ç–æ–ª—å–∫–æ —Å–∏–ª—å–Ω—ã–µ"),
    ]
    for v, d in strengths:
        rows.append(_btn(f"{_mark(user.pivot_strength, v)}{d}", f"set_pivot_{v}"))

    rows.append(_noop("‚îÄ‚îÄ –ú–∞–∫—Å. –≤–æ–∑—Ä–∞—Å—Ç —É—Ä–æ–≤–Ω—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–£—Ä–æ–≤–Ω–∏ —Å—Ç–∞—Ä—à–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è"))
    for v, d in ages:
        rows.append(_btn(f"{_mark(user.max_level_age, v)}{d}", f"set_age_{v}"))

    rows.append(_noop("‚îÄ‚îÄ –ú–∞–∫—Å. –æ–∂–∏–¥–∞–Ω–∏–µ —Ä–µ—Ç–µ—Å—Ç–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–°–∫–æ–ª—å–∫–æ —Å–≤–µ—á–µ–π –∂–¥–∞—Ç—å –≤–æ–∑–≤—Ä–∞—Ç –∫ —É—Ä–æ–≤–Ω—é –ø–æ—Å–ª–µ –ø—Ä–æ–±–æ—è"))
    for v, d in retests:
        rows.append(_btn(f"{_mark(user.max_retest_bars, v)}{d}", f"set_retest_{v}"))

    rows.append(_noop("‚îÄ‚îÄ –ë—É—Ñ–µ—Ä –∑–æ–Ω—ã —É—Ä–æ–≤–Ω—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–ù–∞—Å–∫–æ–ª—å–∫–æ –¥–∞–ª–µ–∫–æ –æ—Ç —É—Ä–æ–≤–Ω—è —Å—á–∏—Ç–∞—Ç—å –∑–æ–Ω—É S/R (–≤ ATR)"))
    for v, d in buffers:
        rows.append(_btn(f"{_mark(user.zone_buffer, v)}{d}", f"set_buffer_{v}"))

    rows.append(_back("menu_settings"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  EMA –¢–†–ï–ù–î
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_ema(user: UserSettings) -> InlineKeyboardMarkup:
    fast_opts = [
        (20,  "EMA 20 ‚Äî –±—ã—Å—Ç—Ä—ã–π. –ú–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –±–æ–∫–æ–≤–∏–∫–µ"),
        (50,  "EMA 50 ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (100, "EMA 100 ‚Äî –º–µ–¥–ª–µ–Ω–Ω—ã–π"),
    ]
    slow_opts = [
        (100, "EMA 100 ‚Äî –±—ã—Å—Ç—Ä–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–º–µ–Ω—É —Ç—Ä–µ–Ω–¥–∞"),
        (200, "EMA 200 ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç. –ù–∞–¥—ë–∂–Ω—ã–π –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —Ç—Ä–µ–Ω–¥ ‚≠ê"),
        (500, "EMA 500 ‚Äî –æ—á–µ–Ω—å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π"),
    ]
    htf_opts = [
        (20,  "EMA 20"),
        (50,  "EMA 50 ‚≠ê"),
        (100, "EMA 100 ‚Äî –±–æ–ª–µ–µ —Å–≥–ª–∞–∂–µ–Ω–Ω—ã–π HTF —Ç—Ä–µ–Ω–¥"),
        (200, "EMA 200"),
    ]
    rows = [
        _noop("‚îÄ‚îÄ –ë—ã—Å—Ç—Ä–∞—è EMA (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _noop("–¶–µ–Ω–∞ –≤—ã—à–µ = –±—ã—á–∏–π —Ç—Ä–µ–Ω–¥. –õ–æ–Ω–≥–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã"),
    ]
    for v, d in fast_opts:
        rows.append(_btn(f"{_mark(user.ema_fast, v)}{d}", f"set_ema_fast_{v}"))

    rows.append(_noop("‚îÄ‚îÄ –ú–µ–¥–ª–µ–Ω–Ω–∞—è EMA (–≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–ë—ã—Å—Ç—Ä–∞—è EMA –≤—ã—à–µ –º–µ–¥–ª–µ–Ω–Ω–æ–π = –±—ã—á–∏–π —Ä—ã–Ω–æ–∫"))
    for v, d in slow_opts:
        rows.append(_btn(f"{_mark(user.ema_slow, v)}{d}", f"set_ema_slow_{v}"))

    rows.append(_noop("‚îÄ‚îÄ HTF EMA (—Ç—Ä–µ–Ω–¥ —Å—Ç–∞—Ä—à–µ–≥–æ –¢–§) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ HTF —Ñ–∏–ª—å—Ç—Ä –≤–∫–ª—é—á—ë–Ω"))
    for v, d in htf_opts:
        rows.append(_btn(f"{_mark(user.htf_ema_period, v)}{d}", f"set_htf_ema_{v}"))

    rows.append(_back("menu_settings"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –§–ò–õ–¨–¢–†–´
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_filters(user: UserSettings) -> InlineKeyboardMarkup:
    rsi_periods = [
        (7,  "RSI 7  ‚Äî –±—ã—Å—Ç—Ä—ã–π. –†–µ–∞–≥–∏—Ä—É–µ—Ç –±—ã—Å—Ç—Ä–æ, —à—É–º–Ω—ã–π"),
        (14, "RSI 14 ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (21, "RSI 21 ‚Äî –º–µ–¥–ª–µ–Ω–Ω—ã–π. –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤"),
    ]
    ob_vals = [
        (60, "60 ‚Äî –º—è–≥–∫–æ. –ë–æ–ª—å—à–µ –ª–æ–Ω–≥–æ–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ"),
        (65, "65 ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (70, "70 ‚Äî —Å—Ç—Ä–æ–≥–æ. –õ–æ–Ω–≥–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ RSI < 70"),
        (75, "75 ‚Äî –æ—á–µ–Ω—å —Å—Ç—Ä–æ–≥–æ. –†–µ–¥–∫–∏–µ –≤—Ö–æ–¥—ã"),
    ]
    os_vals = [
        (25, "25 ‚Äî –æ—á–µ–Ω—å —Å—Ç—Ä–æ–≥–æ. –†–µ–¥–∫–∏–µ —à–æ—Ä—Ç—ã"),
        (30, "30 ‚Äî —Å—Ç—Ä–æ–≥–æ"),
        (35, "35 ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (40, "40 ‚Äî –º—è–≥–∫–æ. –ë–æ–ª—å—à–µ —à–æ—Ä—Ç–æ–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ"),
    ]
    vol_mults = [
        (1.0, "x1.0 ‚Äî –ª—é–±–æ–π –æ–±—ä—ë–º. –ú–∞–∫—Å–∏–º—É–º —Å–∏–≥–Ω–∞–ª–æ–≤"),
        (1.2, "x1.2 ‚Äî —É–º–µ—Ä–µ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä ‚≠ê"),
        (1.5, "x1.5 ‚Äî –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π –æ–±—ä—ë–º"),
        (2.0, "x2.0 ‚Äî —Ç–æ–ª—å–∫–æ —Å–∏–ª—å–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è"),
    ]
    vol_lens = [
        (10, "10 —Å–≤–µ—á–µ–π ‚Äî –±—ã—Å—Ç—Ä–æ–µ —Å—Ä–µ–¥–Ω–µ–µ"),
        (20, "20 —Å–≤–µ—á–µ–π ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (30, "30 —Å–≤–µ—á–µ–π ‚Äî –º–µ–¥–ª–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ"),
    ]

    rows = [
        _noop("‚îÄ‚îÄ –í–∫–ª/–≤—ã–∫–ª —Ñ–∏–ª—å—Ç—Ä—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _btn(f"{_check(user.use_rsi)}     RSI ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—ã –≤ –∑–æ–Ω–∞—Ö –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏", "toggle_rsi"),
        _btn(f"{_check(user.use_volume)}  –û–±—ä—ë–º ‚Äî –ø—Ä–æ–±–æ–π –¥–æ–ª–∂–µ–Ω —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º –æ–±—ä—ë–º–æ–º", "toggle_volume"),
        _btn(f"{_check(user.use_pattern)} –ü–∞—Ç—Ç–µ—Ä–Ω—ã ‚Äî —Ç—Ä–µ–±—É–µ—Ç –ø–∏–Ω-–±–∞—Ä, –ø–æ–≥–ª–æ—â–µ–Ω–∏–µ –∏–ª–∏ –º–æ–ª–æ—Ç –Ω–∞ —Å–≤–µ—á–µ –≤—Ö–æ–¥–∞", "toggle_pattern"),
        _btn(f"{_check(user.use_htf)}     HTF —Ç—Ä–µ–Ω–¥ ‚Äî –ª–æ–Ω–≥–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å—Ç–∞—Ä—à–∏–π –¢–§ –±—ã—á–∏–π –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç", "toggle_htf"),
        _noop("‚îÄ‚îÄ –ü–µ—Ä–∏–æ–¥ RSI ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
    ]
    for v, d in rsi_periods:
        rows.append(_btn(f"{_mark(user.rsi_period, v)}{d}", f"set_rsi_period_{v}"))

    rows.append(_noop(f"‚îÄ‚îÄ –ü–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å RSI (—Å–µ–π—á–∞—Å {user.rsi_ob}) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–õ–æ–Ω–≥ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ RSI –≤—ã—à–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è"))
    for v, d in ob_vals:
        rows.append(_btn(f"{_mark(user.rsi_ob, v)}{d}", f"set_rsi_ob_{v}"))

    rows.append(_noop(f"‚îÄ‚îÄ –ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å RSI (—Å–µ–π—á–∞—Å {user.rsi_os}) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–®–æ—Ä—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ RSI –Ω–∏–∂–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è"))
    for v, d in os_vals:
        rows.append(_btn(f"{_mark(user.rsi_os, v)}{d}", f"set_rsi_os_{v}"))

    rows.append(_noop("‚îÄ‚îÄ –ú–∏–Ω. –æ–±—ä—ë–º (–º–Ω–æ–∂–∏—Ç–µ–ª—å –∫ —Å—Ä–µ–¥–Ω–µ–º—É) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–û–±—ä—ë–º —Å–≤–µ—á–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ N —Ä–∞–∑ –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ"))
    for v, d in vol_mults:
        rows.append(_btn(f"{_mark(user.vol_mult, v)}{d}", f"set_vol_mult_{v}"))

    rows.append(_noop("‚îÄ‚îÄ –ü–µ—Ä–∏–æ–¥ —Å—Ä–µ–¥–Ω–µ–≥–æ –æ–±—ä—ë–º–∞ (—Å–≤–µ—á–µ–π) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    for v, d in vol_lens:
        rows.append(_btn(f"{_mark(user.vol_len, v)}{d}", f"set_vol_len_{v}"))

    rows.append(_back("menu_settings"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –ö–ê–ß–ï–°–¢–í–û –°–ò–ì–ù–ê–õ–ê
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_quality(current: int) -> InlineKeyboardMarkup:
    opts = [
        (1, "‚≠ê         ‚Äî –ª—é–±—ã–µ. –ú–∞–∫—Å–∏–º—É–º —Å–∏–≥–Ω–∞–ª–æ–≤, –º–Ω–æ–≥–æ —à—É–º–∞"),
        (2, "‚≠ê‚≠ê        ‚Äî –±–∞–∑–æ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è. –•–æ—Ä–æ—à–æ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ ‚≠ê"),
        (3, "‚≠ê‚≠ê‚≠ê       ‚Äî –±–∞–ª–∞–Ω—Å. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º"),
        (4, "‚≠ê‚≠ê‚≠ê‚≠ê      ‚Äî —Å—Ç—Ä–æ–≥–∞—è. –ú–∞–ª–æ –Ω–æ –Ω–∞–¥—ë–∂–Ω—ã–µ"),
        (5, "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê     ‚Äî —Ç–æ–ª—å–∫–æ –∏–¥–µ–∞–ª—å–Ω—ã–µ. –û—á–µ–Ω—å —Ä–µ–¥–∫–æ"),
    ]
    rows = [
        _noop("‚îÄ‚îÄ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _noop("–ö–∞—á–µ—Å—Ç–≤–æ = –∫–æ–ª-–≤–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (–æ–±—ä—ë–º+–ø–∞—Ç—Ç–µ—Ä–Ω+RSI+—Ç—Ä–µ–Ω–¥)"),
    ]
    for q, d in opts:
        rows.append(_btn(f"{_mark(current, q)}{d}", f"set_quality_{q}"))
    rows.append(_back("menu_settings"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  COOLDOWN
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_cooldown(current: int) -> InlineKeyboardMarkup:
    opts = [
        (3,  "3 —Å–≤–µ—á–∏  ‚Äî –æ—á–µ–Ω—å —á–∞—Å—Ç–æ. –ú–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ –æ–¥–Ω–æ–π –º–æ–Ω–µ—Ç–µ"),
        (5,  "5 —Å–≤–µ—á–µ–π ‚Äî —á–∞—Å—Ç–æ ‚≠ê"),
        (10, "10 —Å–≤–µ—á–µ–π ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç. 1 —Å–∏–≥–Ω–∞–ª –Ω–∞ 10 —Å–≤–µ—á–µ–π"),
        (15, "15 —Å–≤–µ—á–µ–π ‚Äî —Ä–µ–¥–∫–æ"),
        (20, "20 —Å–≤–µ—á–µ–π ‚Äî –æ—á–µ–Ω—å —Ä–µ–¥–∫–æ. –¢–æ–ª—å–∫–æ –ª—É—á—à–∏–µ –≤—Ö–æ–¥—ã"),
    ]
    rows = [
        _noop("‚îÄ‚îÄ Cooldown –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _noop("–ú–∏–Ω. –∫–æ–ª-–≤–æ —Å–≤–µ—á–µ–π –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏ –ø–æ –æ–¥–Ω–æ–π –º–æ–Ω–µ—Ç–µ"),
    ]
    for v, d in opts:
        rows.append(_btn(f"{_mark(current, v)}{d}", f"set_cooldown_{v}"))
    rows.append(_back("menu_settings"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –°–¢–û–ü-–õ–û–°–°
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_sl(user: UserSettings) -> InlineKeyboardMarkup:
    periods = [
        (7,  "ATR 7  ‚Äî –±—ã—Å—Ç—Ä—ã–π. –°—Ç–æ–ø –±–ª–∏–∑–∫–æ –∫ —Ç–µ–∫—É—â–µ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏"),
        (14, "ATR 14 ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (21, "ATR 21 ‚Äî –º–µ–¥–ª–µ–Ω–Ω—ã–π. –°–≥–ª–∞–∂–µ–Ω–Ω–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å"),
    ]
    mults = [
        (0.5, "x0.5 ‚Äî –æ—á–µ–Ω—å –±–ª–∏–∑–∫–∏–π —Å—Ç–æ–ø. –ß–∞—Å—Ç–æ –≤—ã–±–∏–≤–∞–µ—Ç"),
        (1.0, "x1.0 ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (1.5, "x1.5 ‚Äî —à–∏—Ä–æ–∫–∏–π —Å—Ç–æ–ø. –†–µ–∂–µ –≤—ã–±–∏–≤–∞–µ—Ç"),
        (2.0, "x2.0 ‚Äî –æ—á–µ–Ω—å —à–∏—Ä–æ–∫–∏–π. –ë–æ–ª—å—à–æ–π —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É"),
    ]
    risks = [
        (0.5, "0.5% ‚Äî –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ"),
        (1.0, "1.0% ‚Äî —É–º–µ—Ä–µ–Ω–Ω–æ"),
        (1.5, "1.5% ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (2.0, "2.0% ‚Äî –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ"),
        (3.0, "3.0% ‚Äî –æ—á–µ–Ω—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ"),
    ]
    rows = [
        _noop("‚îÄ‚îÄ –ü–µ—Ä–∏–æ–¥ ATR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _noop("ATR = —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —Å–≤–µ—á–∏. –û—Å–Ω–æ–≤–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–ø–∞"),
    ]
    for v, d in periods:
        rows.append(_btn(f"{_mark(user.atr_period, v)}{d}", f"set_atr_period_{v}"))

    rows.append(_noop("‚îÄ‚îÄ ATR –º–Ω–æ–∂–∏—Ç–µ–ª—å (—Ä–∞–∑–º–µ—Ä —Å—Ç–æ–ø–∞) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("SL = Low - ATR √ó –º–Ω–æ–∂–∏—Ç–µ–ª—å. –ë–æ–ª—å—à–µ = –¥–∞–ª—å—à–µ —Å—Ç–æ–ø"))
    for v, d in mults:
        rows.append(_btn(f"{_mark(user.atr_mult, v)}{d}", f"set_atr_mult_{v}"))

    rows.append(_noop("‚îÄ‚îÄ –ú–∞–∫—Å. —Ä–∏—Å–∫ –æ—Ç —Ü–µ–Ω—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"))
    rows.append(_noop("–ï—Å–ª–∏ —Å—Ç–æ–ø –±–æ–ª—å—à–µ —ç—Ç–æ–≥–æ % ‚Äî –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è"))
    for v, d in risks:
        rows.append(_btn(f"{_mark(user.max_risk_pct, v)}{d}", f"set_risk_{v}"))

    rows.append(_back("menu_settings"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –¶–ï–õ–ò
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_targets(user: UserSettings) -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[
        _noop("‚îÄ‚îÄ –¶–µ–ª–∏ Take Profit (R:R) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _noop("1R = —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –≤—Ö–æ–¥–∞ –¥–æ —Å—Ç–æ–ø–∞"),
        _btn(f"üéØ –¶–µ–ª—å 1: {user.tp1_rr}R ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å", "edit_tp1"),
        _btn(f"üéØ –¶–µ–ª—å 2: {user.tp2_rr}R ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å", "edit_tp2"),
        _btn(f"üèÜ –¶–µ–ª—å 3: {user.tp3_rr}R ‚Äî –Ω–∞–∂–º–∏ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å", "edit_tp3"),
        _noop("–î–µ—Ñ–æ–ª—Ç: 0.8R / 1.5R / 2.5R"),
        _back("menu_settings"),
    ])


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –û–ë–™–Å–ú –ú–û–ù–ï–¢
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_volume(current: float) -> InlineKeyboardMarkup:
    opts = [
        (100_000,    "100–ö$  ‚Äî –≤—Å–µ –º–æ–Ω–µ—Ç—ã –≤–∫–ª—é—á–∞—è –º–µ–ª–∫–∏–µ –∞–ª—å—Ç–∫–æ–∏–Ω—ã"),
        (500_000,    "500–ö$  ‚Äî —Å—Ä–µ–¥–Ω–∏–µ –∏ –∫—Ä—É–ø–Ω—ã–µ"),
        (1_000_000,  "1–ú$    ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚≠ê"),
        (5_000_000,  "5–ú$    ‚Äî —Ç–æ–ª—å–∫–æ –ª–∏–∫–≤–∏–¥–Ω—ã–µ. –ú–µ–Ω—å—à–µ –º–æ–Ω–µ—Ç"),
        (10_000_000, "10–ú$   ‚Äî —Ç–æ–ø-50 –º–æ–Ω–µ—Ç"),
        (50_000_000, "50–ú$   ‚Äî —Ç–æ–ª—å–∫–æ —Ç–æ–ø-10. –û—á–µ–Ω—å –º–∞–ª–æ –º–æ–Ω–µ—Ç"),
    ]
    rows = [
        _noop("‚îÄ‚îÄ –ú–∏–Ω. —Å—É—Ç–æ—á–Ω—ã–π –æ–±—ä—ë–º –º–æ–Ω–µ—Ç—ã ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _noop("–ú–æ–Ω–µ—Ç—ã —Å –æ–±—ä—ë–º–æ–º –Ω–∏–∂–µ ‚Äî –Ω–µ —Å–∫–∞–Ω–∏—Ä—É—é—Ç—Å—è"),
    ]
    for v, d in opts:
        rows.append(_btn(f"{_mark(current, float(v))}{d}", f"set_volume_{int(v)}"))
    rows.append(_back("menu_settings"))
    return InlineKeyboardMarkup(inline_keyboard=rows)


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_notify(user: UserSettings) -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[
        _noop("‚îÄ‚îÄ –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"),
        _btn(f"{_check(user.notify_signal)}   –°–∏–≥–Ω–∞–ª –≤—Ö–æ–¥–∞ ‚Äî –≤—Ö–æ–¥, —Å—Ç–æ–ø, —Ü–µ–ª–∏", "toggle_notify_signal"),
        _btn(f"{_check(user.notify_breakout)} –ü—Ä–æ–±–æ–π —É—Ä–æ–≤–Ω—è ‚Äî —Ä–∞–Ω–Ω–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ —Ä–µ—Ç–µ—Å—Ç–∞", "toggle_notify_breakout"),
        _back("menu_settings"),
    ])


# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#  –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def kb_back() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[_back()])

def kb_back_settings() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[_back("menu_settings")])


def kb_subscribe(config) -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[
        _btn(f"üí≥ –û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É ‚Äî {config.PRICE_30_DAYS} / 30 –¥–Ω–µ–π", "noop"),
        _btn("üì© –ù–∞–ø–∏—Å–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É", "noop"),
        _btn("‚ÑπÔ∏è –£–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ /subscribe", "noop"),
    ])
